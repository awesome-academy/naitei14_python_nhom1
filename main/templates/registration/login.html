{% extends "main/base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Login" %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/auth.css' %}">
{% endblock %}

{% block content %}
<div class="auth-wrapper">
  <div class="auth-card card shadow-sm border-0">
    <div class="card-body">

      <h3 class="card-title mb-3 text-center">{% trans "Login" %}</h3>
      <p class="text-muted text-center mb-4">
        {% trans "Welcome back!" %}
      </p>

      {# ===== Messages ===== #}
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      {% endif %}

      {# ===== Login form ===== #}
      <form method="post" class="auth-form" novalidate>
        {% csrf_token %}
        {{ form|crispy }}
        <button type="submit" class="btn btn-primary w-100 mb-3">
          {% trans "Login" %}
        </button>
      </form>

      {# ===== Divider ===== #}
      <div class="divider my-3">
        <span>{% trans "or" %}</span>
      </div>

      {# ===== Social login ===== #}
      <div class="social-login d-grid gap-2">
        <a
          class="btn btn-outline-dark auth-social-btn"
          href="{% url 'social:begin' 'google-oauth2' %}?next={{ request.GET.next|default:'/' }}"
        >
          <span class="auth-icon google">G</span>
          <span>{% trans "Continue with Google" %}</span>
        </a>

        <a
          class="btn btn-outline-primary auth-social-btn"
          href="{% url 'social:begin' 'facebook' %}?next={{ request.GET.next|default:'/' }}"
        >
          <span class="auth-icon facebook">f</span>
          <span>{% trans "Login with Facebook" %}</span>
        </a>
      </div>

      {# ===== Signup link ===== #}
      <p class="mt-4 text-center text-muted small">
        {% trans "Don't have an account?" %}
        <a href="{% url 'signup' %}" class="text-decoration-none fw-semibold">
          {% trans "Create a new one" %}
        </a>
      </p>

    </div>
  </div>
</div>
{% endblock %}
